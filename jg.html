<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>JLPT å¯¦ç”¨æ–‡æ³•</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --bg-glass: rgba(30, 41, 59, 0.7);
            --border-glass: rgba(255, 255, 255, 0.08);
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;

            /* èªæ„è‰² */
            --color-fire: #f43f5e;   /* å¿…å­¸ */
            --color-fire-bg: rgba(244, 63, 94, 0.15);
            --color-ok: #38bdf8;     /* ç†è§£ */
            --color-ok-bg: rgba(56, 189, 248, 0.15);
            --color-low: #fbbf24;    /* ä½é » */
            --color-low-bg: rgba(251, 191, 36, 0.15);
            --color-no: #64748b;     /* ä¸ç”¨ */
            --color-no-bg: rgba(100, 116, 139, 0.15);

            --tag-bg: #334155;
            --accent: #8b5cf6;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
            background-color: var(--bg-body);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            padding-bottom: 80px; /* åº•éƒ¨ç•™ç™½ */
        }

        /* --- Header & Controls (Sticky + å¯æ”¶åˆ) --- */
        .sticky-header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-glass);
            padding: 10px 16px 8px 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transition: padding 0.2s ease;
        }

        .header-top-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
            margin-bottom: 8px;
        }

        .app-title {
            font-size: 1.05rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: 0.5px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .app-title-badge {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 999px;
            border: 1px solid var(--border-glass);
            color: var(--text-muted);
        }

        .toggle-filters-btn {
            border: 1px solid var(--border-glass);
            background: rgba(15,23,42,0.8);
            color: var(--text-secondary);
            border-radius: 999px;
            padding: 4px 10px;
            font-size: 0.75rem;
            display: inline-flex;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            white-space: nowrap;
        }

        .toggle-filters-btn span {
            font-size: 0.8rem;
        }

        .header-controls {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .sticky-header.collapsed {
            padding-bottom: 6px;
        }
        .sticky-header.collapsed .header-controls {
            display: none;
        }

        .sticky-header.collapsed .app-title {
            font-size: 1rem;
        }

        .sticky-header.collapsed .toggle-filters-btn {
            background: transparent;
        }

        .search-box {
            position: relative;
            width: 100%;
        }

        .search-box input {
            width: 100%;
            background: var(--bg-card);
            border: 1px solid var(--border-glass);
            padding: 10px 14px 10px 36px;
            border-radius: 12px;
            color: white;
            font-size: 0.95rem;
            transition: all 0.2s ease;
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.2);
        }

        .search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .filter-section {
            margin-top: 2px;
        }

        .filter-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-bottom: 3px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .filter-scroll {
            display: flex;
            gap: 6px;
            overflow-x: auto;
            padding-bottom: 4px;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .filter-scroll::-webkit-scrollbar {
            display: none;
        }

        .filter-pill {
            flex: 0 0 auto;
            padding: 4px 11px;
            border-radius: 999px;
            font-size: 0.8rem;
            font-weight: 500;
            background: var(--bg-card);
            border: 1px solid var(--border-glass);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .filter-pill.active {
            background: var(--text-primary);
            color: var(--bg-body);
            border-color: var(--text-primary);
        }

        /* --- Grid Layout --- */
        .container {
            padding: 16px;
            max-width: 900px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 14px;
        }

        @media (min-width: 640px) {
            .container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* --- Grammar Card --- */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-glass);
            border-radius: 16px;
            overflow: hidden;
            transition: transform 0.15s cubic-bezier(0.25, 0.8, 0.25, 1),
                        box-shadow 0.15s ease;
            position: relative;
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-main {
            padding: 14px 14px 18px 14px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .card-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 4px;
        }

        .term {
            font-size: 1.2rem;
            font-weight: 700;
            color: #fff;
            line-height: 1.3;
        }

        .badges {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .badge {
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 6px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Level Badges */
        .badge.n1 { background: #475569; color: #e2e8f0; }
        .badge.n2 { background: #334155; color: #e2e8f0; }
        .badge.n3 { background: #1e293b; color: #cbd5e1; border: 1px solid #334155; }
        .badge.n4 { background: #052e16; color: #bbf7d0; border: 1px solid #16a34a; }
        .badge.n5 { background: #111827; color: #e5e7eb; border: 1px solid #6b7280; }
        .badge.p  { background: #312e81; color: #c7d2fe; border: 1px solid #818cf8; }

        .status-text {
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 999px;
            font-weight: 600;
            display: inline-block;
            align-self: flex-start;
            margin-bottom: 2px;
        }

        /* Dynamic Status Styling */
        .card[data-type="fire"] {
            border-left: 4px solid var(--color-fire);
        }
        .card[data-type="fire"] .status-text {
            color: var(--color-fire);
            background: var(--color-fire-bg);
        }

        .card[data-type="ok"] {
            border-left: 4px solid var(--color-ok);
        }
        .card[data-type="ok"] .status-text {
            color: var(--color-ok);
            background: var(--color-ok-bg);
        }

        .card[data-type="low"] {
            border-left: 4px solid var(--color-low);
        }
        .card[data-type="low"] .status-text {
            color: var(--color-low);
            background: var(--color-low-bg);
        }

        .card[data-type="no"] {
            border-left: 4px solid var(--color-no);
            opacity: 0.8;
        }
        .card[data-type="no"] .status-text {
            color: var(--color-no);
            background: var(--color-no-bg);
        }

        .meaning {
            font-size: 0.92rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* --- Expanded Content --- */
        .card-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.25s ease, padding 0.25s ease;
            background: rgba(0, 0, 0, 0.2);
            padding: 0 14px;
        }

        .card.expanded .card-details {
            border-top: 1px solid var(--border-glass);
            padding: 10px 14px 12px 14px;
        }

        .detail-section {
            margin-bottom: 10px;
        }

        .detail-section:last-child {
            margin-bottom: 0;
        }

        .section-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-muted);
            letter-spacing: 1px;
            margin-bottom: 4px;
            font-weight: 600;
        }

        .connect-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
        }

        .connect-chip {
            background: var(--tag-bg);
            color: var(--text-primary);
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.82rem;
            font-family: monospace;
            border: 1px solid transparent;
        }

        .connect-chip span {
            color: var(--accent);
            font-weight: bold;
        }

        .example-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 9px 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #e2e8f0;
            border-left: 2px solid var(--text-muted);
            white-space: pre-line;
        }

        .expand-icon {
            position: absolute;
            right: 10px;
            bottom: 10px;
            color: var(--text-muted);
            font-size: 0.8rem;
            transition: transform 0.25s;
        }

        .card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        /* å°å°çš„ä»¶æ•¸é¡¯ç¤º */
        .result-info {
            font-size: 0.72rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

    </style>
</head>
<body>

    <div class="sticky-header" id="stickyHeader">
        <div class="header-top-row">
            <div class="app-title">
                <span class="app-title-badge">BETA</span>
                <span>JLPTå¯¦ç”¨æ–‡æ³•</span>
            </div>
            <button class="toggle-filters-btn" id="toggleFiltersBtn" type="button">
                <span>æ”¶åˆç¯©é¸</span>
                <span id="toggleIcon">â–²</span>
            </button>
        </div>

        <div class="header-controls">
            <div class="search-box">
                <span class="search-icon">ğŸ”</span>
                <input type="text" id="searchInput" placeholder="æœå°‹æ–‡æ³•ï¼ˆä¾‹å¦‚ï¼šã‚ã’ãã€ã¨æ€ã†ã€N1â€¦ï¼‰">
            </div>

            <!-- ç†Ÿç·´åº¦åˆ†é¡ï¼šå¿…å­¸ / ç†è§£ / ä½é » / ä¸ç”¨ -->
            <div class="filter-section">
                <div class="filter-label">ç†Ÿç·´åº¦</div>
                <div class="filter-scroll" id="typeFilterRow">
                    <div class="filter-pill active" data-group="type" data-filter="all" onclick="filterByType('all', this)">å…¨éƒ¨</div>
                    <div class="filter-pill" data-group="type" data-filter="fire" onclick="filterByType('fire', this)">ğŸ”¥ å¿…å­¸</div>
                    <div class="filter-pill" data-group="type" data-filter="ok" onclick="filterByType('ok', this)">â— ç†è§£</div>
                    <div class="filter-pill" data-group="type" data-filter="low" onclick="filterByType('low', this)">â–³ ä½é »</div>
                    <div class="filter-pill" data-group="type" data-filter="no" onclick="filterByType('no', this)">âœ– ä¸ç”¨</div>
                </div>
            </div>

            <!-- ç­‰ç´šåˆ†é¡ï¼šN1ã€œN5 + P -->
            <div class="filter-section">
                <div class="filter-label">ç­‰ç´š / åˆ†å€</div>
                <div class="filter-scroll" id="levelFilterRow">
                    <div class="filter-pill active" data-group="level" data-filter="all" onclick="filterByLevel('all', this)">å…¨éƒ¨ç­‰ç´š</div>
                    <div class="filter-pill" data-group="level" data-filter="N1" onclick="filterByLevel('N1', this)">N1</div>
                    <div class="filter-pill" data-group="level" data-filter="N2" onclick="filterByLevel('N2', this)">N2</div>
                    <div class="filter-pill" data-group="level" data-filter="N3" onclick="filterByLevel('N3', this)">N3</div>
                    <div class="filter-pill" data-group="level" data-filter="N4" onclick="filterByLevel('N4', this)">N4</div>
                    <div class="filter-pill" data-group="level" data-filter="N5" onclick="filterByLevel('N5', this)">N5</div>
                    <div class="filter-pill" data-group="level" data-filter="P" onclick="filterByLevel('P', this)">Plus</div>
                </div>
            </div>

            <div class="result-info" id="resultInfo">
                <!-- é€™è£¡æœƒé¡¯ç¤ºã€Œå…± X æ¢ã€ï¼‹ç›®å‰ç¯©é¸æ‘˜è¦ -->
            </div>
        </div>
    </div>

    <div id="grid" class="container"></div>

    <script>
        // è³‡æ–™çµæ§‹ï¼š
        // level: 'N1' | 'N2' | 'N3' | 'N4' | 'N5' | 'P'
        // type : 'fire' | 'ok' | 'low' | 'no'
        // connection: ç”¨ã€Œæ™®é€šå½¢ + ã€œã€ç­‰æè¿°ï¼Œè‹¥æœ‰å¤šç¨®æ¥çºŒå¯ç”¨ / åˆ†éš”
        // example: å…è¨±ä½¿ç”¨ \n æ–·è¡Œ

        const grammarData = [
            // ===== N5 ğŸ”¥ å¿…å­¸ =====
            { 
              level: 'N5',
              term: 'ã€œã¨æ€ã†',
              type: 'fire',
              meaning: 'æˆ‘è¦ºå¾—â€¦ï¼æˆ‘æƒ³â€¦ï¼ˆä¸»è§€æ„è¦‹ï¼‰',
              connection: 'æ™®é€šå½¢ + <span>ã¨æ€ã†</span>',
              suffix: 'ã¨æ€ã†',
              example: 'æ˜æ—¥ã¯æ™´ã‚Œã‚‹ã¨æ€ã†ã€‚\n(æˆ‘è¦ºå¾—æ˜å¤©æœƒæ”¾æ™´ã€‚)'
            },
            { 
              level: 'N5',
              term: 'ã€œãŸã„',
              type: 'fire',
              meaning: 'æƒ³è¦åšâ€¦ï¼ˆè¡¨é”è‡ªå·±é¡˜æœ›ï¼‰',
              connection: 'Vã¾ã™ + <span>ãŸã„</span>',
              suffix: 'ãŸã„',
              example: 'æ—¥æœ¬ã«è¡ŒããŸã„ã§ã™ã€‚\n(æˆ‘æƒ³å»æ—¥æœ¬ã€‚)'
            },

            // ===== N2 ğŸ”¥ å¿…å­¸ =====
            {
              level: 'N2',
              term: 'ã€œã‚ã’ã',
              type: 'fire',
              meaning: 'æŠ˜é¨°äº†åŠå¤©ï¼Œçµæœå»â€¦ï¼ˆå¤šåŠè² é¢ï¼‰',
              connection: 'VãŸ / Nã® + <span>ã‚ã’ã</span>',
              suffix: 'ã‚ã’ã',
              example: 'æ‚©ã‚“ã ã‚ã’ãã€çµå±€ã‚„ã‚ã‚‹ã“ã¨ã«ã—ãŸã€‚\n(ç…©æƒ±äº†åŠå¤©ï¼Œæœ€å¾Œé‚„æ˜¯æ±ºå®šæ”¾æ£„ã€‚)'
            },

            // ===== N1 â— ç†è§£ =====
            {
              level: 'N1',
              term: 'ã€œã„ã‹ã‚“ã ',
              type: 'ok',
              meaning: 'å–æ±ºæ–¼â€¦ï¼è¦–â€¦è€Œå®šï¼ˆæ­£å¼æ›¸é¢èªï¼‰',
              connection: 'N + <span>ã„ã‹ã‚“ã </span>',
              suffix: 'ã„ã‹ã‚“ã ',
              example: 'æˆåŠŸã™ã‚‹ã‹ã©ã†ã‹ã¯åŠªåŠ›ã®ã„ã‹ã‚“ã ã€‚\n(èƒ½å¦æˆåŠŸå–æ±ºæ–¼åŠªåŠ›ã€‚)'
            },

            // ===== N1 â–³ ä½é » =====
            {
              level: 'N1',
              term: 'ã€œãã‚‰ã„ãŒã‚ã‚‹',
              type: 'low',
              meaning: 'æœ‰é»â€¦çš„å‚¾å‘ï¼ˆå¤šç‚ºè² é¢è©•åƒ¹ï¼‰',
              connection: 'Vè¾æ›¸å½¢ / Nã® + <span>ãã‚‰ã„ãŒã‚ã‚‹</span>',
              suffix: 'ãã‚‰ã„ãŒã‚ã‚‹',
              example: 'å½¼ã¯ç‰©äº‹ã‚’æ‚²è¦³çš„ã«è€ƒãˆã‚‹ãã‚‰ã„ãŒã‚ã‚‹ã€‚\n(ä»–æœ‰æŠŠäº‹æƒ…å¾€å£è™•æƒ³çš„å‚¾å‘ã€‚)'
            },

            // ===== N1 âœ– ä¸ç”¨ï¼ˆtype:noï¼‰ =====
            {
              level: 'N1',
              term: 'ã€œã‚ã£ã¦ã®',
              type: 'no',
              meaning: 'æœ‰ A æ‰æœ‰ Bï¼ˆå¼·èª¿ã€Œå¤šè™§æœ‰â€¦æ‰â€¦ã€çš„æ–‡èªï¼Œæ¯”è¼ƒæ›¸é¢ã€è€ƒè©¦å‘ï¼‰',
              connection: 'N1 + <span>ã‚ã£ã¦ã®</span> + N2',
              suffix: 'ã‚ã£ã¦ã®',
              example: 'ãŠå®¢æ§˜ã‚ã£ã¦ã®ä¼šç¤¾ã§ã™ã€‚\n(æœ‰é¡§å®¢ï¼Œå…¬å¸æ‰å¾—ä»¥å­˜åœ¨ã€‚)'
            },

            // ===== N2 âœ– ä¸ç”¨ï¼ˆtype:noï¼‰ =====
            {
              level: 'N2',
              term: 'ã€œã«ã¦',
              type: 'no',
              meaning: 'åœ¨â€¦ï¼ä»¥â€¦ï¼ˆå¤é¢¨æ›¸é¢ï¼Œç”¨æ–¼å…¬å‘Šã€å…¬æ–‡ï¼Œå£èªå¹¾ä¹ä¸ç”¨ï¼‰',
              connection: 'N + <span>ã«ã¦</span>',
              suffix: 'ã«ã¦',
              example: 'æœ¬æ—¥ã¯æ±äº¬é§…ã«ã¦é–‹å‚¬ã„ãŸã—ã¾ã™ã€‚\n(ä»Šæ—¥æ–¼æ±äº¬è»Šç«™èˆ‰è¡Œã€‚ï¼å¤šè¦‹æ–¼å…¬å‘Šæ–‡é«”)'
            }
            // ğŸ‘‰ ä¹‹å¾Œä½ åªè¦åœ¨é€™è£¡æŠŠå®Œæ•´è³‡æ–™æ•´åŒ…è²¼ä¸Šä¾†å³å¯
        ];

        let currentTypeFilter = 'all';
        let currentLevelFilter = 'all';
        let currentSearch = '';

        const gridEl = document.getElementById('grid');
        const searchInput = document.getElementById('searchInput');
        const resultInfoEl = document.getElementById('resultInfo');
        const stickyHeader = document.getElementById('stickyHeader');
        const toggleFiltersBtn = document.getElementById('toggleFiltersBtn');
        const toggleIcon = document.getElementById('toggleIcon');

        function getLevelBadgeClass(level) {
            switch (level) {
                case 'N1': return 'n1';
                case 'N2': return 'n2';
                case 'N3': return 'n3';
                case 'N4': return 'n4';
                case 'N5': return 'n5';
                case 'P':  return 'p';
                default:   return 'n5';
            }
        }

        function getTypeLabel(type) {
            switch (type) {
                case 'fire': return 'ğŸ”¥ å¿…å­¸';
                case 'ok':   return 'â— ç†è§£';
                case 'low':  return 'â–³ ä½é »';
                case 'no':   return 'âœ– ä¸ç”¨';
                default:     return '';
            }
        }

        function getTypeSummary(type) {
            switch (type) {
                case 'fire': return 'å¿…å­¸';
                case 'ok':   return 'ç†è§£';
                case 'low':  return 'ä½é »';
                case 'no':   return 'ä¸ç”¨';
                default:     return 'å…¨éƒ¨';
            }
        }

        function getLevelSummary(level) {
            if (level === 'all') return 'å…¨éƒ¨ç­‰ç´š';
            return level;
        }

        function renderCards() {
            gridEl.innerHTML = '';

            const filtered = grammarData.filter(item => {
                if (currentTypeFilter !== 'all' && item.type !== currentTypeFilter) return false;
                if (currentLevelFilter !== 'all' && item.level !== currentLevelFilter) return false;

                if (currentSearch.trim() !== '') {
                    const q = currentSearch.trim().toLowerCase();
                    const haystack = (item.term + ' ' + item.meaning + ' ' + (item.example || '') + ' ' + item.level)
                        .toLowerCase();
                    if (!haystack.includes(q)) return false;
                }
                return true;
            });

            filtered.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.type = item.type;
                card.dataset.level = item.level;

                const levelBadgeClass = getLevelBadgeClass(item.level);
                const typeLabel = getTypeLabel(item.type);

                const connectionHTML = item.connection || '';
                const exampleText = item.example || '';

                card.innerHTML = `
                    <div class="card-main">
                        <div class="card-top">
                            <div>
                                <div class="status-text">${typeLabel}</div>
                                <div class="term">${item.term}</div>
                            </div>
                            <div class="badges">
                                <span class="badge ${levelBadgeClass}">${item.level}</span>
                            </div>
                        </div>
                        <div class="meaning">${item.meaning}</div>
                    </div>
                    <div class="card-details">
                        <div class="detail-section">
                            <div class="section-label">æ¥çºŒ</div>
                            <div class="connect-wrapper">
                                <div class="connect-chip">${connectionHTML}</div>
                            </div>
                        </div>
                        <div class="detail-section">
                            <div class="section-label">ä¾‹å¥</div>
                            <div class="example-box">${exampleText}</div>
                        </div>
                    </div>
                    <div class="expand-icon">â–¼</div>
                `;

                const main = card.querySelector('.card-main');
                const details = card.querySelector('.card-details');

                main.addEventListener('click', () => {
                    const isExpanded = card.classList.contains('expanded');
                    if (isExpanded) {
                        // æ”¶åˆ
                        details.style.maxHeight = details.scrollHeight + 'px'; // å…ˆé–ä½é«˜åº¦
                        requestAnimationFrame(() => {
                            card.classList.remove('expanded');
                            details.style.maxHeight = '0';
                        });
                    } else {
                        // å±•é–‹
                        card.classList.add('expanded');
                        details.style.maxHeight = details.scrollHeight + 'px';
                    }
                });

                // å‹•æ…‹èª¿æ•´ max-height ä»¥æ‡‰ä»˜å…§å®¹é«˜åº¦è®ŠåŒ–
                details.addEventListener('transitionend', (e) => {
                    if (card.classList.contains('expanded')) {
                        details.style.maxHeight = 'none';
                    }
                });

                gridEl.appendChild(card);
            });

            // æ›´æ–°ä¸Šæ–¹ä»¶æ•¸è³‡è¨Š
            const total = grammarData.length;
            const count = filtered.length;
            const typeText = getTypeSummary(currentTypeFilter);
            const levelText = getLevelSummary(currentLevelFilter);

            let summary = `å…± ${count} / ${total} æ¢`;
            if (currentTypeFilter !== 'all' || currentLevelFilter !== 'all' || currentSearch.trim() !== '') {
                const parts = [];
                if (currentTypeFilter !== 'all') parts.push(`ç†Ÿç·´åº¦ï¼š${typeText}`);
                if (currentLevelFilter !== 'all') parts.push(`ç­‰ç´šï¼š${levelText}`);
                if (currentSearch.trim() !== '') parts.push(`é—œéµå­—ï¼šã€Œ${currentSearch.trim()}ã€`);
                summary += ' ï½œ ' + parts.join('ãƒ»');
            }
            resultInfoEl.textContent = summary;
        }

        function filterByType(type, el) {
            currentTypeFilter = type;
            document.querySelectorAll('.filter-pill[data-group="type"]').forEach(btn => {
                btn.classList.toggle('active', btn === el);
            });
            renderCards();
        }

        function filterByLevel(level, el) {
            currentLevelFilter = level;
            document.querySelectorAll('.filter-pill[data-group="level"]').forEach(btn => {
                btn.classList.toggle('active', btn === el);
            });
            renderCards();
        }

        searchInput.addEventListener('input', (e) => {
            currentSearch = e.target.value;
            renderCards();
        });

        // ç¯©é¸å€æ”¶åˆï¼å±•é–‹
        toggleFiltersBtn.addEventListener('click', () => {
            const isCollapsed = stickyHeader.classList.toggle('collapsed');
            toggleIcon.textContent = isCollapsed ? 'â–¼' : 'â–²';
            toggleFiltersBtn.firstElementChild.textContent = isCollapsed ? 'å±•é–‹ç¯©é¸' : 'æ”¶åˆç¯©é¸';
        });

        // åˆæ¬¡æ¸²æŸ“
        renderCards();
    </script>
</body>
</html>
