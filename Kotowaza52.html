<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å£èªé«˜é »è«ºèª (iOS å„ªåŒ–ç‰ˆ)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --bg: #f2f2f7; /* iOS é¢¨æ ¼èƒŒæ™¯ç° */
            --card-bg: #ffffff;
            --text-main: #000000;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Noto Sans JP', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 16px;
            -webkit-text-size-adjust: 100%;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        h1 { margin: 0 0 10px 0; font-size: 1.5rem; }

        /* æ§åˆ¶é¢æ¿å„ªåŒ– */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        select {
            font-size: 16px; /* é˜²æ­¢ iOS ç¸®æ”¾ */
            padding: 10px;
            width: 100%;
            max-width: 300px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            background-color: var(--accent);
            color: white;
            font-weight: bold;
            font-size: 14px;
            cursor: pointer;
        }
        
        button.secondary { background-color: #95a5a6; }

        /* å¡ç‰‡è¨­è¨ˆ */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-left: 5px solid var(--accent);
        }

        .card-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .jp {
            font-size: 1.3rem;
            font-weight: 700;
            margin: 0;
            line-height: 1.4;
            color: #333;
        }

        .read {
            color: #666;
            font-size: 0.9rem;
            margin: 5px 0 15px 0;
        }

        .play-btn {
            background: #e1f5fe;
            color: var(--accent);
            width: 44px; /* iOS è§¸æ§å‹å–„å¤§å° */
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            flex-shrink: 0;
            margin-left: 10px;
        }
        
        .play-btn:active { background: #b3e5fc; transform: scale(0.95); }
        .play-btn svg { width: 24px; height: 24px; fill: currentColor; }

        .meta {
            border-top: 1px solid #eee;
            padding-top: 12px;
            font-size: 0.95rem;
        }
        
        .row { margin-bottom: 6px; display: flex; }
        .tag {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-right: 8px;
            font-weight: bold;
            color: #555;
            height: fit-content;
            white-space: nowrap;
        }
        .tag.mod { background: #fff3cd; color: #856404; }

        /* Debug å€åŸŸ */
        #debug-log {
            margin-top: 20px;
            font-family: monospace;
            font-size: 10px;
            color: #888;
            background: #eee;
            padding: 10px;
            border-radius: 8px;
            white-space: pre-wrap;
            display: none; /* é è¨­éš±è— */
        }
    </style>
</head>
<body>

<header>
    <h1>å£èªé«˜é »è«ºèª (iOS ç‰ˆ)</h1>
    <div class="controls">
        <select id="voiceSelect">
            <option value="default">ç³»çµ±é è¨­ (iOS è‡ªå‹•æ±ºå®š)</option>
        </select>
        <div class="btn-group">
            <button onclick="loadVoices(true)">ğŸ”„ é‡æ–°åµæ¸¬èªéŸ³</button>
            <button class="secondary" onclick="toggleDebug()">ğŸ é¡¯ç¤º/éš±è—åµæ¸¬è³‡è¨Š</button>
        </div>
        <div id="debug-log"></div>
    </div>
</header>

<div id="app" class="grid"></div>

<script>
    const proverbs = [
        { id: 1, jp: "é›¨é™ã£ã¦åœ°å›ºã¾ã‚‹", read: "ã‚ã‚ ãµã£ã¦ ã˜ ã‹ãŸã¾ã‚‹", mean: "ç¶“æ­·æ³¢æŠ˜å¾Œé—œä¿‚åè€Œæ›´å¥½", modern: "çµæœã‚ªãƒ¼ãƒ©ã‚¤ / é€†ã«ä»²è‰¯ããªã£ãŸ" },
        { id: 2, jp: "æ¡ˆãšã‚‹ã‚ˆã‚Šç”£ã‚€ãŒæ˜“ã—", read: "ã‚ã‚“ãšã‚‹ ã‚ˆã‚Š ã†ã‚€ãŒ ã‚„ã™ã—", mean: "å¯¦éš›åšæ¯”æƒ³åƒä¸­å®¹æ˜“", modern: "å–ã‚Šè¶Šã—è‹¦åŠ´ / ã‚„ã£ã¦ã¿ãŸã‚‰ä½™è£•" },
        { id: 3, jp: "çŸ³æ©‹ã‚’å©ã„ã¦æ¸¡ã‚‹", read: "ã„ã—ã°ã— ã‚’ ãŸãŸã„ã¦ ã‚ãŸã‚‹", mean: "éæ–¼è¬¹æ…ã€å°å¿ƒæ±‚ç©©", modern: "è¶…æ…é‡æ´¾ / ãƒ“ãƒ“ã‚Šã™ã" },
        { id: 4, jp: "å˜˜ã‹ã‚‰å‡ºãŸã¾ã“ã¨", read: "ã†ã ã‹ã‚‰ ã§ãŸ ã¾ã“ã¨", mean: "å¼„å‡æˆçœŸ", modern: "ç“¢ç®ªï¼ˆã²ã‚‡ã†ãŸã‚“ï¼‰ã‹ã‚‰é§’ / ãƒã‚¸ã«ãªã£ãŸ" },
        { id: 5, jp: "é¦¬ã®è€³ã«å¿µä»", read: "ã†ã¾ ã® ã¿ã¿ ã« ã­ã‚“ã¶ã¤", mean: "å°ä¸è½çš„äººèªªä¹Ÿæ²’ç”¨", modern: "ã‚¹ãƒ«ãƒ¼ã•ã‚ŒãŸ / èãè€³æŒãŸãš" },
        { id: 6, jp: "é¬¼ã«é‡‘æ£’", read: "ãŠã« ã« ã‹ãªã¼ã†", mean: "å¼·è€…æ›´å¼·ã€å¦‚è™æ·»ç¿¼", modern: "æœ€å¼· / ãƒãƒ¼ãƒˆç´š / ç„¡åŒçŠ¶æ…‹" },
        { id: 7, jp: "æººã‚Œã‚‹è€…ã¯è—ã‚’ã‚‚æ´ã‚€", read: "ãŠã¼ã‚Œã‚‹ ã‚‚ã® ã¯ ã‚ã‚‰ ã‚’ã‚‚ ã¤ã‹ã‚€", mean: "é™·å…¥çµ•å¢ƒæ™‚æŠ“ä»»ä½•å¸Œæœ›", modern: "å¿…æ­»ã™ã / ç¥é ¼ã¿" },
        { id: 8, jp: "çŒ¿ã‚‚æœ¨ã‹ã‚‰è½ã¡ã‚‹", read: "ã•ã‚‹ã‚‚ ã ã‹ã‚‰ ãŠã¡ã‚‹", mean: "é«˜æ‰‹ä¹Ÿæœƒå¤±èª¤", modern: "ãƒ‰ãƒ³ãƒã‚¤ / èª°ã«ã§ã‚‚ãƒŸã‚¹ã¯ã‚ã‚‹" },
        { id: 9, jp: "å±±æ¤’ã¯å°ç²’ã§ã‚‚ã´ã‚Šã‚Šã¨è¾›ã„", read: "ã•ã‚“ã—ã‚‡ã† ã¯ ã“ã¤ã¶ ã§ã‚‚ ã´ã‚Šã‚Šã¨ ã‹ã‚‰ã„", mean: "å¤–è¡¨ä¸èµ·çœ¼ä½†å¯¦åŠ›å¾ˆå¼·", modern: "è¦‹ã‹ã‘ã«ã‚ˆã‚‰ãªã„ / å°ã•ã„ã‘ã©å¼·ã„" },
        { id: 10, jp: "å¥½ãã“ãã‚‚ã®ã®ä¸Šæ‰‹ãªã‚Œ", read: "ã™ãã“ã ã‚‚ã®ã® ã˜ã‚‡ã†ãš ãªã‚Œ", mean: "ç†±æƒ…æ‰æ˜¯æœ€å¼·å­¸ç¿’åŠ›", modern: "ãƒãƒã‚‹ãŒå‹ã¡ / ã‚ªã‚¿ã‚¯æ°—è³ªãŒæœ€å¼·" },
        { id: 11, jp: "æ£šã‹ã‚‰ç‰¡ä¸¹é¤…", read: "ãŸãª ã‹ã‚‰ ã¼ãŸã‚‚ã¡", mean: "æ„å¤–ä¹‹è²¡ã€åæ”¶å¥½è™•", modern: "ãƒ©ãƒƒã‚­ãƒ¼ï¼ / é‹ã‚²ãƒ¼ã§å‹ã£ãŸ" },
        { id: 12, jp: "è™ã®å¨ã‚’å€Ÿã‚‹ç‹", read: "ã¨ã‚‰ ã® ã„ ã‚’ ã‹ã‚‹ ãã¤ã­", mean: "é èƒŒæ™¯è€€æ­¦æšå¨", modern: "è¦ªã®ä¸ƒå…‰ã‚Š / è…°å·¾ç€ï¼ˆã“ã—ãã‚“ã¡ã‚ƒãï¼‰" },
        { id: 13, jp: "æ³£ãã£é¢ã«èœ‚", read: "ãªãã£ã¤ã‚‰ ã« ã¯ã¡", mean: "ç¦ä¸å–®è¡Œ", modern: "ã¤ã„ã¦ãªã„ / è¸ã‚“ã ã‚Šè¹´ã£ãŸã‚Š" },
        { id: 14, jp: "éš£ã®èŠç”Ÿã¯é’ã„", read: "ã¨ãªã‚Š ã® ã—ã°ãµ ã¯ ã‚ãŠã„", mean: "åˆ¥äººæ°¸é çœ‹èµ·ä¾†æ›´å¥½", modern: "ãªã„ã‚‚ã®ã­ã ã‚Š / ä»–äººãŒç¾¨ã¾ã—ã„" },
        { id: 15, jp: "æ•ã‚‰ã¬ç‹¸ã®çš®ç®—ç”¨", read: "ã¨ã‚‰ã¬ ãŸã¬ã ã® ã‹ã‚ã–ã‚“ã‚ˆã†", mean: "éåº¦æ¨‚è§€ã€é æ¸¬å¤ªæ—©", modern: "å¦„æƒ³ä¹™ / æ°—ãŒæ—©ã„" },
        { id: 16, jp: "é£›ã‚“ã§ç«ã«ã„ã‚‹å¤ã®è™«", read: "ã¨ã‚“ã§ ã² ã« ã„ã‚‹ ãªã¤ ã® ã‚€ã—", mean: "è‡ªæ‰¾éº»ç…©", modern: "è‡ªçˆ† / ã‚«ãƒ¢ãŒãƒã‚®èƒŒè² ã£ã¦ãã‚‹" },
        { id: 17, jp: "ãªãã¦ä¸ƒç™–", read: "ãªãã¦ ãªãªãã›", mean: "äººäººéƒ½æœ‰ç¼ºé»æˆ–ç¿’æ…£", modern: "èª°ã«ã§ã‚‚ç™–ã¯ã‚ã‚‹ / å€‹æ€§ã ã‚ˆ" },
        { id: 18, jp: "å¯è€³ã«æ°´", read: "ã­ã¿ã¿ ã« ã¿ãš", mean: "æ™´å¤©éœ¹é‚", modern: "ã‚µãƒ—ãƒ©ã‚¤ã‚º / ãƒã‚¸ã§ãƒ“ãƒ“ã£ãŸ" },
        { id: 19, jp: "ç›®ã¯å£ã»ã©ã«ç‰©ã‚’è¨€ã†", read: "ã‚ ã¯ ãã¡ ã»ã© ã« ã‚‚ã® ã‚’ ã„ã†", mean: "çœ¼ç¥é€éœ²çœŸæ„", modern: "é¡”ã«æ›¸ã„ã¦ã‚ã‚‹ / ç›®ãŒãƒã‚¸" },
        { id: 20, jp: "è—ªã‚’ã¤ã¤ã„ã¦è›‡ã‚’å‡ºã™", read: "ã‚„ã¶ ã‚’ ã¤ã¤ã„ã¦ ã¸ã³ ã‚’ ã ã™", mean: "å¤šæ­¤ä¸€èˆ‰åæ‹›éº»ç…©", modern: "ä½™è¨ˆãªã“ã¨ã—ãŸ / å¢“ç©´ã‚’æ˜ã‚‹" },
        { id: 21, jp: "æ¥å¹´ã®ã“ã¨ã‚’è¨€ãˆã°é¬¼ãŒç¬‘ã†", read: "ã‚‰ã„ã­ã‚“ ã® ã“ã¨ ã‚’ ã„ãˆã° ãŠã« ãŒ ã‚ã‚‰ã†", mean: "æœªä¾†å¤ªä¸ç¢ºå®š", modern: "å…ˆã®ã“ã¨ãªã‚“ã¦åˆ†ã‹ã‚‰ã‚“" },
        { id: 22, jp: "æ‚ªäº‹åƒé‡Œã‚’èµ°ã‚‹", read: "ã‚ãã˜ ã›ã‚“ã‚Š ã‚’ ã¯ã—ã‚‹", mean: "å£äº‹å‚³æ’­å¿«", modern: "æ‹¡æ•£å¸Œæœ›ï¼ˆç¬‘ï¼‰ / ç‚ä¸Šã™ã‚‹ã®ã¯æ—©ã„" },
        { id: 23, jp: "çŸ³ã®ä¸Šã«ã‚‚ä¸‰å¹´", read: "ã„ã— ã® ã†ãˆ ã«ã‚‚ ã•ã‚“ã­ã‚“", mean: "å …æŒçµ‚æœƒæœ‰æˆæœ", modern: "ç¶™ç¶šã¯åŠ›ãªã‚Š / ã¨ã‚Šã‚ãˆãšç¶šã‘ã‚" },
        { id: 24, jp: "æ€¥ãŒã°å›ã‚Œ", read: "ã„ããŒã° ã¾ã‚ã‚Œ", mean: "æ¬²é€Ÿå‰‡ä¸é”", modern: "åœ°é“ãŒä¸€ç•ªã®è¿‘é“ / ãƒ†ãƒ³ãƒ‘ã‚‹ãª" },
        { id: 25, jp: "å˜˜ã‚‚æ–¹ä¾¿", read: "ã†ã ã‚‚ ã»ã†ã¹ã‚“", mean: "å–„æ„çš„è¬Šè¨€", modern: "å¤§äººã®å¯¾å¿œ / å»ºå‰ã‚‚å¤§äº‹" },
        { id: 26, jp: "æ€ã„ç«‹ã£ãŸãŒå‰æ—¥", read: "ãŠã‚‚ã„ãŸã£ãŸ ãŒ ãã¡ã˜ã¤", mean: "ç«‹åˆ»è¡Œå‹•æœ€é‡è¦", modern: "å³è¡Œå‹• / ä»Šã‚„ã‚ã†" },
        { id: 27, jp: "çµ‚ã‚ã‚Šè‰¯ã‘ã‚Œã°ã™ã¹ã¦è‰¯ã—", read: "ãŠã‚ã‚Š ã‚ˆã‘ã‚Œã° ã™ã¹ã¦ ã‚ˆã—", mean: "çµæœå‹ééç¨‹", modern: "å‹ã¦ã°å®˜è» / æœ€çµ‚å›ãŒè‰¯ã‘ã‚Œã°ç¥ä½œ" },
        { id: 28, jp: "å‹ã£ã¦å…œã®ç·’ã‚’ç· ã‚ã‚ˆ", read: "ã‹ã£ã¦ ã‹ã¶ã¨ ã® ãŠ ã‚’ ã—ã‚ã‚ˆ", mean: "å‹ä¸é©•ã€ä¿æŒè­¦æˆ’", modern: "èª¿å­ã«ä¹—ã‚‹ãª / æ²¹æ–­å¤§æ•µ" },
        { id: 29, jp: "å£ã«è€³ã‚ã‚Šéšœå­ã«ç›®ã‚ã‚Š", read: "ã‹ã¹ ã« ã¿ã¿ ã‚ã‚Š ã—ã‚‡ã†ã˜ ã« ã‚ ã‚ã‚Š", mean: "å°å¿ƒæ—äººå·è½", modern: "ã©ã“ã§è¦‹ã‚‰ã‚Œã¦ã‚‹ã‹åˆ†ã‹ã‚‰ã‚“ / èº«ãƒãƒ¬æ³¨æ„" },
        { id: 30, jp: "èãã¯ä¸€æ™‚ã®æ¥èã‹ã¬ã¯ä¸€ç”Ÿã®æ¥", read: "ãã ã¯ ã„ã£ã¨ã ã® ã¯ã˜...", mean: "ä¸æ‡‚å°±è¦å•", modern: "ã‚°ã‚°ã‚Œï¼ˆç¬‘ï¼‰/ çŸ¥ã£ãŸã‹ã¶ã‚Šã¯æ¥" },
        { id: 31, jp: "å£ã¯ç¦ã®å…ƒ", read: "ãã¡ ã¯ ã‚ã–ã‚ã„ ã® ã‚‚ã¨", mean: "æ…è¨€", modern: "å¤±è¨€æ³¨æ„ / ä½™è¨ˆãªã“ã¨è¨€ã†ãª" },
        { id: 32, jp: "è™ç©´ã«å…¥ã‚‰ãšã‚“ã°è™å­ã‚’å¾—ãš", read: "ã“ã‘ã¤ ã« ã„ã‚‰ãšã‚“ã° ã“ã˜ ã‚’ ãˆãš", mean: "ä¸å…¥è™ç©´ç„‰å¾—è™å­", modern: "ãƒãƒ¼ãƒªã‚¹ã‚¯ãƒ»ãƒãƒ¼ãƒªã‚¿ãƒ¼ãƒ³ / æ”»ã‚ãªãã‚ƒå‹ã¦ãªã„" },
        { id: 33, jp: "è»¢ã°ã¬å…ˆã®æ–", read: "ã“ã‚ã°ã¬ ã•ã ã® ã¤ãˆ", mean: "äº‹å‰é˜²ç¯„", modern: "ä¿é™ºã‹ã‘ã‚‹ / ãƒªã‚¹ã‚¯ãƒ˜ãƒƒã‚¸" },
        { id: 34, jp: "è§¦ã‚‰ã¬ç¥ã«ç¥Ÿã‚Šãªã—", read: "ã•ã‚ã‚‰ã¬ ã‹ã¿ ã« ãŸãŸã‚Š ãªã—", mean: "åˆ¥ç¢°éº»ç…©", modern: "é–¢ã‚ã‚‰ãªã„ã®ãŒå‰ / ã‚¹ãƒ«ãƒ¼å®‰å®š" },
        { id: 35, jp: "ä¸‰äººå¯„ã‚Œã°æ–‡æ®Šã®çŸ¥æµ", read: "ã•ã‚“ã«ã‚“ ã‚ˆã‚Œã° ã‚‚ã‚“ã˜ã‚… ã® ã¡ãˆ", mean: "å¤šäººé›†æ€å»£ç›Š", modern: "ãƒ–ãƒ¬ã‚¹ãƒˆã—ã‚ˆã† / é›†åˆçŸ¥" },
        { id: 36, jp: "æœ±ã«äº¤ã‚ã‚Œã°èµ¤ããªã‚‹", read: "ã—ã‚… ã« ã¾ã˜ã‚ã‚Œã° ã‚ã‹ã ãªã‚‹", mean: "è¿‘æœ±è€…èµ¤", modern: "ç’°å¢ƒå¤§äº‹ / é¡å‹ï¼ˆã‚‹ã„ã¨ã‚‚ï¼‰" },
        { id: 37, jp: "æ€¥ã„ã¦ã¯äº‹ã‚’ä»•æã˜ã‚‹", read: "ã›ã„ã¦ã¯ ã“ã¨ ã‚’ ã—ãã‚“ã˜ã‚‹", mean: "å¤ªæ€¥æœƒæç ¸", modern: "ç„¦ã‚Šã¯ç¦ç‰© / è½ã¡ç€ã‘" },
        { id: 38, jp: "å¡µã‚‚ç©ã‚‚ã‚Œã°å±±ã¨ãªã‚‹", read: "ã¡ã‚Š ã‚‚ ã¤ã‚‚ã‚Œã° ã‚„ã¾ ã¨ ãªã‚‹", mean: "ç©å°‘æˆå¤š", modern: "ãƒãƒªãƒ„ãƒ¢ / ã‚³ãƒ„ã‚³ãƒ„ãŒå¤§äº‹" },
        { id: 39, jp: "ç”Ÿå…µæ³•ã¯å¤§æ€ªæˆ‘ã®ã‚‚ã¨", read: "ãªã¾ã³ã‚‡ã†ã»ã† ã¯ ãŠãŠã‘ãŒ ã® ã‚‚ã¨", mean: "åŠæ¡¶æ°´æœ€å±éšª", modern: "çŸ¥ã£ãŸã‹ã¶ã‚Šä¹™ / ã«ã‚ã‹ã¯é»™ã£ã¦ã‚" },
        { id: 40, jp: "ç¿’ã†ã‚ˆã‚Šæ…£ã‚Œã‚", read: "ãªã‚‰ã† ã‚ˆã‚Š ãªã‚Œã‚", mean: "å¯¦ä½œå‹éç†è«–", modern: "ä½“ã§è¦šãˆã‚ / å®Ÿè·µã‚ã‚‹ã®ã¿" },
        { id: 41, jp: "äººé–“ä¸‡äº‹å¡ç¿ãŒé¦¬", read: "ã«ã‚“ã’ã‚“ ã°ã‚“ã˜ ã•ã„ãŠã† ãŒ ã†ã¾", mean: "å£äº‹å¯èƒ½æ˜¯å¥½äº‹", modern: "äººç”Ÿä½•ãŒã‚ã‚‹ã‹åˆ†ã‹ã‚‰ã‚“ / ãƒ—ãƒ©ãƒã‚¤ã‚¼ãƒ­" },
        { id: 42, jp: "äºŒå…ã‚’è¿½ã†è€…ã¯ä¸€å…ã‚’ã‚‚å¾—ãš", read: "ã«ã¨ ã‚’ ãŠã† ã‚‚ã® ã¯ ã„ã£ã¨ ã‚’ã‚‚ ãˆãš", mean: "åˆ†å¿ƒå°±ä»€éº¼éƒ½å¾—ä¸åˆ°", modern: "ã©ã£ã¡ã¤ã‹ãšã¯ãƒ€ãƒ¡ / æ¬²å¼µã‚Šã™ã" },
        { id: 43, jp: "èƒ½ã‚ã‚‹é·¹ã¯çˆªã‚’éš ã™", read: "ã®ã† ã‚ã‚‹ ãŸã‹ ã¯ ã¤ã‚ ã‚’ ã‹ãã™", mean: "çœŸæ­£å¼·çš„äººä¸èª‡è€€", modern: "å®ŸåŠ›è€…ã¯ã‚¤ã‚­ã‚‰ãªã„ / ã‚®ãƒ£ãƒƒãƒ—èŒãˆ" },
        { id: 44, jp: "æ®‹ã‚Šç‰©ã«ã¯ç¦ãŒã‚ã‚‹", read: "ã®ã“ã‚Šã‚‚ã® ã«ã¯ ãµã ãŒ ã‚ã‚‹", mean: "å‰©ä¸‹çš„åè€Œæœ‰å¥½è™•", modern: "ãƒ©ã‚¹ãƒˆãƒ¯ãƒ³è³ / ä½™ã‚Šç‰©æœ€å¼·" },
        { id: 45, jp: "æ—©èµ·ãã¯ä¸‰æ–‡ã®å¾³", read: "ã¯ã‚„ãŠã ã¯ ã•ã‚“ã‚‚ã‚“ ã® ã¨ã", mean: "æ—©èµ·çš„äººä½”ä¾¿å®œ", modern: "æœæ´»ï¼ˆã‚ã•ã‹ã¤ï¼‰ / æ„è­˜é«˜ã„ç³»" },
        { id: 46, jp: "ç™¾èã¯ä¸€è¦‹ã«å¦‚ã‹ãš", read: "ã²ã‚ƒãã¶ã‚“ ã¯ ã„ã£ã‘ã‚“ ã« ã—ã‹ãš", mean: "çœ¼è¦‹ç‚ºæ†‘", modern: "è¦‹ãŸæ–¹ãŒæ—©ã„ / ç¾å ´è¦‹ã‚" },
        { id: 47, jp: "ä»ã®é¡”ã‚‚ä¸‰åº¦", read: "ã»ã¨ã‘ ã® ã‹ãŠ ã‚‚ ã•ã‚“ã©", mean: "å¿ç„¡å¯å¿", modern: "ã„ã„åŠ æ¸›ã«ã—ã‚ / ãƒ–ãƒã‚®ãƒ¬å¯¸å‰" },
        { id: 48, jp: "è’”ã‹ã¬ç¨®ã¯ç”Ÿãˆã¬", read: "ã¾ã‹ã¬ ãŸã­ ã¯ ã¯ãˆã¬", mean: "ä¸åŠªåŠ›å°±æ²’æˆæœ", modern: "è‡ªæ¥­è‡ªå¾—ï¼ˆæ‚ªã„æ„å‘³ã§ã‚‚ï¼‰ / ã‚„ã‚‰ãªãã‚ƒå§‹ã¾ã‚‰ãªã„" },
        { id: 49, jp: "è² ã‘ã‚‹ãŒå‹ã¡", read: "ã¾ã‘ã‚‹ ãŒ ã‹ã¡", mean: "é€€ä¸€æ­¥åè€Œæ˜¯è´", modern: "å¤§äººã®ä½™è£• / è­²ã£ã¦ã‚„ã‚‹" },
        { id: 50, jp: "è‰¯è–¬ã¯å£ã«è‹¦ã—", read: "ã‚Šã‚‡ã†ã‚„ã ã¯ ãã¡ ã« ã«ãŒã—", mean: "å¿ è¨€é€†è€³", modern: "å›³æ˜Ÿã¤ã‹ã‚ŒãŸ / è€³ãŒç—›ã„è©±" },
        { id: 51, jp: "é¡ã¯å‹ã‚’å‘¼ã¶", read: "ã‚‹ã„ ã¯ ã¨ã‚‚ ã‚’ ã‚ˆã¶", mean: "ç‰©ä»¥é¡èš", modern: "é¡å‹ï¼ˆã‚‹ã„ã¨ã‚‚ï¼‰ / ä¼¼ãŸè€…åŒå£«" },
        { id: 52, jp: "è«–ã‚ˆã‚Šè¨¼æ‹ ", read: "ã‚ã‚“ ã‚ˆã‚Š ã—ã‚‡ã†ã“", mean: "äº‹å¯¦å‹éè¾¯è«–", modern: "ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã ã› / çµæœãŒå…¨ã¦" }
    ];

    const app = document.getElementById('app');
    const voiceSelect = document.getElementById('voiceSelect');
    const debugLog = document.getElementById('debug-log');
    let voices = [];

    // åˆå§‹åŒ–ä»‹é¢
    function init() {
        proverbs.forEach(item => {
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <div class="card-top">
                    <div>
                        <p class="jp">${item.jp}</p>
                        <p class="read">${item.read}</p>
                    </div>
                    <button class="play-btn" onclick="speak('${item.jp}')">
                         <svg viewBox="0 0 24 24"><path d="M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77zm-4 0h-2.5l-5 5v5h5l5 5v-15z"/></svg>
                    </button>
                </div>
                <div class="meta">
                    <div class="row">
                        <span class="tag">æ„æ€</span>
                        <span>${item.mean}</span>
                    </div>
                    <div class="row">
                        <span class="tag mod">ç¾ä»£</span>
                        <span>${item.modern}</span>
                    </div>
                </div>
            `;
            app.appendChild(card);
        });
        
        loadVoices();
    }

    function toggleDebug() {
        debugLog.style.display = debugLog.style.display === 'none' || debugLog.style.display === '' ? 'block' : 'none';
    }

    function log(msg) {
        debugLog.textContent += msg + "\n";
    }

    // è¼‰å…¥èªéŸ³
    function loadVoices(force = false) {
        // æ¸…ç©ºä¸¦åŠ å…¥é è¨­é¸é …
        voiceSelect.innerHTML = '<option value="default">ç³»çµ±é è¨­ (ç”± iOS æ±ºå®š)</option>';
        debugLog.textContent = "åµæ¸¬èªéŸ³ä¸­...\n";
        
        voices = window.speechSynthesis.getVoices();
        
        // éæ¿¾æ—¥æ–‡
        const jpVoices = voices.filter(v => v.lang.includes('ja') || v.lang.includes('JP'));

        log(`åµæ¸¬åˆ°ç¸½èªéŸ³æ•¸: ${voices.length}`);
        log(`åµæ¸¬åˆ°æ—¥æ–‡èªéŸ³æ•¸: ${jpVoices.length}`);

        if (jpVoices.length === 0) {
            log("è­¦å‘Š: iOS å°šæœªé‡‹å‡ºèªéŸ³åˆ—è¡¨ï¼Œè«‹é»æ“Šã€Œé‡æ–°åµæ¸¬ã€æˆ–ç¨å¾Œå†è©¦ã€‚");
        }

        jpVoices.forEach(voice => {
            const option = document.createElement('option');
            option.value = voice.name;
            // æ¨™è¨˜ localService (æ˜¯å¦ç‚ºæœ¬æ©ŸèªéŸ³ï¼Œé€šå¸¸æœ¬æ©ŸèªéŸ³è¼ƒå¿«)
            const type = voice.localService ? "[æœ¬æ©Ÿ]" : "[ç¶²è·¯]";
            option.textContent = `${voice.name} ${type}`;
            voiceSelect.appendChild(option);
            
            log(`- ${voice.name} (${voice.lang}) Default:${voice.default}`);
        });
    }

    // iOS Safari çš„æ€ªç™–ï¼šéœ€è¦åè¦†ç›£è½
    if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = () => {
            // åªæœ‰ç•¶åˆ—è¡¨æ˜¯ç©ºçš„æ™‚å€™æ‰è‡ªå‹•é‡æ•´ï¼Œé¿å…ä½¿ç”¨è€…é¸ä¸€åŠè¢«é‡ç½®
            if (voices.length === 0) loadVoices();
        };
    }

    // ç™¼éŸ³é‚è¼¯
    function speak(text) {
        window.speechSynthesis.cancel();
        
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ja-JP';
        utterance.rate = 0.85; // iOS é è¨­èªé€Ÿç¨å¿«ï¼Œèª¿æ…¢ä¸€é»æ›´æœ‰æ„Ÿæƒ…
        
        const selectedName = voiceSelect.value;
        
        if (selectedName !== 'default') {
            // ä½¿ç”¨è€…æŒ‡å®šäº†ç‰¹å®šèªéŸ³ (ä¾‹å¦‚ Kyoko)
            const selectedVoice = voices.find(v => v.name === selectedName);
            if (selectedVoice) {
                utterance.voice = selectedVoice;
            }
        } else {
            // ä½¿ç”¨è€…é¸ã€Œç³»çµ±é è¨­ã€
            // æŠ€å·§ï¼šä¸æŒ‡å®š .voice å±¬æ€§ï¼ŒåªæŒ‡å®š lang
            // é€™æœƒè®“ iOS ä½¿ç”¨ä½ åœ¨ã€Œè¨­å®š > è¼”åŠ©ä½¿ç”¨ > èªéŸ³å…§å®¹ > è²éŸ³ã€è£¡è¨­å®šçš„é è¨­å€¼
            // é€™æœ‰æ©Ÿæœƒå«å‡ºé«˜éŸ³è³ª Siri èªéŸ³ (è¦– iOS ç‰ˆæœ¬è€Œå®š)
        }

        window.speechSynthesis.speak(utterance);
    }

    init();
</script>

</body>
</html>
